<template name="contactSlideIn">
  <div class="info-slide-in">
    <ul class="nav nav-pills nav-slide-in pull-left">
      <li role="presentation">
        <a data-action="close-contact-slide-in"><i class="glyphicon glyphicon-chevron-right"></i></a>
      </li>
    </ul>
    <ul class="nav nav-pills nav-slide-in pull-right">
      <li role="presentation">
        <a><i class="glyphicon glyphicon-new-window"></i></a>
      </li>
      <li role="presentation">
        <a><i class="glyphicon glyphicon-star-empty"></i></a>
      </li>
      <li role="presentation">
        <a><i class="glyphicon glyphicon-option-vertical"></i></a>
      </li>
    </ul>
    <div class="info-top-section bg-primary">
      <div class="container-fluid">
        <div class="media">
          <div class="media-left">
            <img class="media-object img-rounded" src="{{contactDetails.avatar}}" alt="{{contactDetails.name}} avatar">
          </div>
          <div class="media-body">
            <h4 class="media-heading">{{contactDetails.name}}</h4>
            <p>{{contactDetails.primaryOutlets}}</p>
          </div>
        </div>
        <div class="info-menu">
          <div class="row">
            <a data-section="contactDetails" class="col-xs-4 info-menu-option {{#if equal contactSection 'contactDetails'}}active{{/if}}">
              Details
            </a>
            <a data-section="contactActivity" class="col-xs-4 info-menu-option {{#if equal contactSection 'contactActivity'}}active{{/if}}">
              Activity
            </a>
            <a data-section="contactRelated" class="col-xs-4 info-menu-option {{#if equal contactSection 'contactRelated'}}active{{/if}}">
              Related
            </a>
          </div>
        </div>
      </div>
    </div>
    {{> Template.dynamic template=contactSection data=contactDetails}}
  </div>
</template>

<template name="contactDetails">
  <div class="container-fluid info-content">
    <form>
      <div class="last-updated text-right">
        Last updated by <span class="text-primary">{{youOrName updatedBy}}</span> {{fromNow updatedAt}}
      </div>
      <div class="form-group">
        <label for="contact-detail-name">Name</label>
        <p class="editable-text-container" id="contact-detail-name">{{> editableText collection="contacts" field="name" inputClass="form-control" eventType="dblclick" substitute="-" beforeUpdate="generateUpdatePost"}}</p>
      </div>
      <div class="form-group">
        <label for="contact-detail-job-title">Title</label>
        <p class="editable-text-container" id="contact-detail-job-title">{{> editableText collection="contacts" field="jobTitles" acceptEmpty=true inputClass="form-control" eventType="dblclick" substitute="-" beforeUpdate="generateUpdatePost"}}</p>
      </div>
      <div class="form-group">
        <label for="contact-detail-primary-outlets">Media outlet</label>
        <p class="editable-text-container" id="contact-detail-primary-outlets">{{> editableText collection="contacts" field="primaryOutlets" acceptEmpty=true inputClass="form-control" eventType="dblclick" substitute="-" beforeUpdate="generateUpdatePost"}}</p>
      </div>
      <div class="form-group">
        <label for="contact-detail-screenName">Twitter</label>
        <p class="editable-text-container" id="contact-detail-screenName">{{> editableText collection="contacts" field="socials.0.value" acceptEmpty=true inputClass="form-control" eventType="dblclick" substitute="-" beforeUpdate="generateUpdatePostTwitter"}}</p>
      </div>
      <div class="form-group">
        <label for="contact-detail-email">Email</label>
        <p class="editable-text-container" id="contact-detail-email">{{> editableText collection="contacts" field="emails.0.value" acceptEmpty=true inputClass="form-control" eventType="dblclick" substitute="-" beforeUpdate="generateUpdatePost"}}</p>
      </div>
      <div class="form-group">
        <label for="contact-detail-phone">Phone</label>
        <p class="editable-text-container" id="contact-detail-phone">
          <i class="glyphicon glyphicon-phone{{#if equal phones.[0].type 'landline'}}-alt{{/if}}" data-action="toggle-phone-type"></i>
          {{> editableText collection="contacts" field="phones.0.value" acceptEmpty=true inputClass="form-control inline" class="inline" eventType="dblclick" substitute="-" beforeUpdate="generateUpdatePost"}}
          </p>
      </div>
    </form>
  </div>
</template>

<template name="contactActivity">
  <div class="container-fluid info-activity-log">
    {{#if medialistSlug}}
      {{> logFeedback feedbackTemplate.data}}
    {{/if}}
    <ul class="nav nav-tabs nav-justified">
      <li role="presentation" class="{{#if equal instance.option.get ''}}active{{/if}}">
        <a data-option="">All Activity</a>
      </li>
      {{#if medialistSlug}}
        <li role="presentation" class="{{#if equal instance.option.get medialistSlug}}active{{/if}}">
          <a data-option="{{medialistSlug}}">#{{medialistSlug}}</a>
        </li>
      {{/if}}
    </ul>

    {{> Template.dynamic template=feedbackTemplate.template data=feedbackTemplate.data}}

  </div>
</template>

<template name="contactPosts">
  <div class="panel panel-sm">
    <ul class="list-group">
    {{#each posts}}
      <li class="list-group-item">
        {{> displayPost post=this}}
      </li>
    {{/each}}
    </ul>
  </div>
  {{#unless Template.subscriptionsReady}}
    <div class="spinner-box">
      {{> spinner}}
    </div>
  {{/unless}}
  {{#unless (or posts.count (not Template.subscriptionsReady))}}
    <div class="h6 text-center">There is no activity for this contact.</div>
  {{/unless}}
</template>

<template name="contactRelated">
  <div class="container-fluid info-activity-log">
    <div class="spacer"></div>
    <h5 class="text-center">Related</h5>
  </div>
</template>
